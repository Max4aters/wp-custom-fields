jQuery(document).ready(function(e){"use strict";e(".divergent-tabs a").click(function(t){t.preventDefault();var i=e(this).attr("href"),a=i.replace("#","");e('input[name="divergentSection"]').val(a),e(".divergent-tabs a").removeClass("active"),e(".divergent-section").removeClass("active"),e(this).addClass("active"),e(i).addClass("active")}),e.fn.divergentInit=function(){e(this).find(".divergent-colorpicker").alphaColorPicker(),e(this).find(".divergent-select").data("sortable")&&e(this).find(".divergent-select").select2Sortable(),e(this).find(".divergent-slider").each(function(t){var i=e(this).data("id"),a=e(this).data("min"),n=e(this).data("max"),r=e(this).data("step"),l=e(this).data("value");e(this).slider({value:l,min:a,max:n,step:r,slide:function(t,a){e("#"+i).val(a.value)}})}),e(this).find(".divergent-location").each(function(t){var i=e(".divergent-map-search",this).get(0),a=e(".divergent-map-canvas",this).get(0),n=e(".latitude",this),r=e(".longitude",this),l=e(".city",this),o=e(".postal_code",this),s=e(".street",this),d=e(".number",this),v=new google.maps.LatLng(52.2129918,5.2793703),g=7;n.val().length>0&&r.val().length>0&&(v=new google.maps.LatLng(n.val(),r.val()),g=15);var c={scrollwheel:!1,center:v,zoom:g,mapTypeId:google.maps.MapTypeId.ROADMAP},p=new google.maps.Map(a,c),f={map:p,draggable:!1},h=new google.maps.Marker(f),u=new google.maps.places.Autocomplete(i,{types:["geocode"]});n.val().length>0&&r.val().length>0&&h.setPosition(v),u.bindTo("bounds",p),google.maps.event.addListener(u,"place_changed",function(){var e=u.getPlace(),t=e.address_components;if(e.geometry.viewport?p.fitBounds(e.geometry.viewport):(p.setCenter(e.geometry.location),p.setZoom(17)),h.setPosition(e.geometry.location),n.val(e.geometry.location.lat()),r.val(e.geometry.location.lng()),t)for(var i=0;i<t.length;i++){var a=t[i],v=a.types;-1!=v.indexOf("street_number")?d.val(a.long_name):-1!=v.indexOf("route")?s.val(a.long_name):-1!=v.indexOf("locality")?l.val(a.long_name):-1!=v.indexOf("postal_code")&&o.val(a.long_name)}})}),e(this).find(".divergent-upload-wrapper").each(function(t){var g,i=e(this).find(".divergent-upload-add"),a=e(this).find(".divergent-upload-remove"),n=e(this).find(".divergent-upload-value"),r=e(this).data("title"),l=e(this).data("type"),o=e(this).data("button"),s=e(this).data("multiple"),d=e(this).find(".divergent-single-media.empty");i.live("click",function(e){return e.preventDefault(),g?void g.open():(g=wp.media.frames.frame=wp.media({title:r,library:{type:l},button:{text:o},multiple:s}),g.on("select",function(){var a,e=g.state().get("selection").toJSON(),t=n.val();console.log(e),e.forEach(function(e){t+=e.id+",",a="image"===e.type?e.url:e.icon,d.before('<div class="divergent-single-media" data-id="'+e.id+'"><img src="'+a+'" /><a href="#" class="divergent-upload-remove"><i class="material-icons">clear</i></a></div>')}),n.val(t)}),void g.open())}),a.live("click",function(t){t.preventDefault();var i=e(this).closest(".divergent-single-media"),a=i.data("id"),r=n.val(),l=r.replace(a+",","");i.remove(),n.val(l)})})},e(".divergent-repeatable-add").on("click",function(t){t.preventDefault();var i=e(this).closest(".divergent-repeatable-container").find(".divergent-repeatable-group").length,a=e(this).closest(".divergent-repeatable-container").find(".divergent-repeatable-group").last(),n=a.clone(!0,!0),r=n.find("h4 span");r.text(i),n.html(function(e,t){return t.replace(/\[\d\]/g,"["+i+"]").replace(/\-\d\-/g,"-"+i+"-")}),n.divergentInit(),a.after(n)}),e(".divergent-repeatable-remove").on("click",function(t){t.preventDefault();var i=e(this).closest(".divergent-repeatable-container").find(".divergent-repeatable-group").length,a=e(this).closest(".divergent-repeatable-container").find(".divergent-repeatable-group").last();i>1&&a.remove()}),e(".divergent-repeatable-toggle").live("click",function(t){t.preventDefault(),"arrow_drop_down"===e(this).find("i").text()?e(this).find("i").text("arrow_drop_up"):"arrow_drop_up"===e(this).find("i").text()&&e(this).find("i").text("arrow_drop_down"),e(this).closest("h4").next(".divergent-repeatable-group-fields").slideToggle("closed")}),e(".divergent-framework").divergentInit()});