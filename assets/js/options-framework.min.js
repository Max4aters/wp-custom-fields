jQuery(document).ready(function(e){"use strict";var t={palettes:!0};e(".divergent-tabs a").click(function(t){t.preventDefault();var n=e(this).data("section");e('input[name="divergent-current-section"]').val(n),e(".divergent-tabs a").removeClass("active"),e(".divergent-section").removeClass("active"),e(this).addClass("active");var i=e(this).attr("href");e(i).addClass("active")}),e.fn.divergentInit=function(){e(this).find(".divergent-colorpicker").wpColorPicker(t),e(this).find(".divergent-select").data("sortable")&&e(this).find(".divergent-select").select2Sortable(),e(this).find(".divergent-slider").each(function(t){var n=e(this).data("id"),i=e(this).data("min"),r=e(this).data("max"),a=e(this).data("step"),o=e(this).data("value");e(this).slider({value:o,min:i,max:r,step:a,slide:function(t,i){e("#"+n).val(i.value)}})}),e(this).find(".divergent-location").each(function(t){var n=e(".divergent-map-search",this).get(0),i=e(".divergent-map-canvas",this).get(0),r=e(".latitude",this),a=e(".longitude",this),o=e(".city",this),s=e(".postal_code",this),l=e(".street",this),u=e(".number",this),c=new google.maps.LatLng(52.2129918,5.2793703),d=7;r.val().length>0&&a.val().length>0&&(c=new google.maps.LatLng(r.val(),a.val()),d=15);var p={scrollwheel:!1,center:c,zoom:d,mapTypeId:google.maps.MapTypeId.ROADMAP},f=new google.maps.Map(i,p),h={map:f,draggable:!1},v=new google.maps.Marker(h),m=new google.maps.places.Autocomplete(n,{types:["geocode"]});r.val().length>0&&a.val().length>0&&v.setPosition(c),m.bindTo("bounds",f),google.maps.event.addListener(m,"place_changed",function(){var e=m.getPlace(),t=e.address_components;if(e.geometry.viewport?f.fitBounds(e.geometry.viewport):(f.setCenter(e.geometry.location),f.setZoom(17)),v.setPosition(e.geometry.location),r.val(e.geometry.location.lat()),a.val(e.geometry.location.lng()),t)for(var n=0;n<t.length;n++){var i=t[n],c=i.types;-1!=c.indexOf("street_number")?u.val(i.long_name):-1!=c.indexOf("route")?l.val(i.long_name):-1!=c.indexOf("locality")?o.val(i.long_name):-1!=c.indexOf("postal_code")&&s.val(i.long_name)}})}),e(this).find(".divergent-upload-wrapper").each(function(t){var d,n=e(this).find(".divergent-upload-add"),i=e(this).find(".divergent-upload-remove"),r=e(this).find(".divergent-upload-value"),a=e(this).data("title"),o=e(this).data("type"),s=e(this).data("button"),l=e(this).data("multiple"),u=e(this).find(".divergent-single-media.empty");n.live("click",function(e){return e.preventDefault(),d?void d.open():(d=wp.media.frames.frame=wp.media({title:a,library:{type:o},button:{text:s},multiple:l}),d.on("select",function(){var i,e=d.state().get("selection").toJSON(),t=r.val();console.log(e),e.forEach(function(e){t+=e.id+",",i="image"===e.type?e.url:e.icon,u.before('<div class="divergent-single-media" data-id="'+e.id+'"><img src="'+i+'" /><a href="#" class="divergent-upload-remove"><i class="fa fa-times-circle"></i></a></div>')}),r.val(t)}),void d.open())}),i.live("click",function(t){t.preventDefault();var n=e(this).closest(".divergent-single-media"),i=n.data("id"),a=r.val(),o=a.replace(i+",","");n.remove(),r.val(o)})})},e("#post").validate(),e("#divergent-options-page").validate(),e(".divergent-repeatable-add").on("click",function(t){t.preventDefault();var n=e(this).closest(".divergent-repeatable-container").find(".divergent-repeatable-group").length,i=e(this).closest(".divergent-repeatable-container").find(".divergent-repeatable-group").last(),r=i.clone(!0,!0),a=r.find("h4 span");a.text(n),r.html(function(e,t){return t.replace(/\[\d\]/g,"["+n+"]").replace(/\-\d\-/g,"-"+n+"-")}),r.divergentInit(),i.after(r)}),e(".divergent-repeatable-remove").on("click",function(t){t.preventDefault();var n=e(this).closest(".divergent-repeatable-container").find(".divergent-repeatable-group").length,i=e(this).closest(".divergent-repeatable-container").find(".divergent-repeatable-group").last();n>1&&i.remove()}),e(".divergent-repeatable-toggle").live("click",function(t){t.preventDefault(),e(this).find(".fa").toggleClass("fa-rotate-180"),e(this).closest("h4").next(".divergent-repeatable-group-fields").slideToggle("closed")}),e(".divergent-framework").divergentInit()});